<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MasterPat ECom Laws</title>
    <meta name="description"
        content="Lerne E-Commerce-Recht spielerisch! Teste dein Wissen √ºber BGB, DSGVO, UWG und mehr.">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="parallax.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;600;700;800&display=swap" rel="stylesheet">
</head>

<body>
    <!-- 3D Parallax Background -->
    <div class="parallax-background">
        <!-- Layers will be created by JavaScript -->
    </div>
    <div class="parallax-particles">
        <!-- Particles and accents will be created by JavaScript -->
    </div>
    <!-- Splash Screen -->
    <div id="splash-screen" class="screen active">
        <div class="splash-content">
            <div class="trophy-animation">
                <div class="trophy-glow"></div>
                <span class="trophy-icon">üèÜ</span>
            </div>
            <h1 class="app-title">MasterPat ECom Laws</h1>
            <p class="app-subtitle">Lerne E-Commerce-Recht spielerisch</p>

            <div class="feature-cards">
                <div class="feature-card">
                    <span class="feature-icon">üí°</span>
                    <h3>Clever spielen gewinnt</h3>
                    <p>Schnell lernen, clever denken, jede Herausforderung meistern.</p>
                </div>

                <div class="feature-card">
                    <span class="feature-icon">üìö</span>
                    <h3>T√§glich clever quizzen</h3>
                    <p>Wissen t√§glich erweitern, Herausforderungen meistern, jeden Tag kl√ºger werden.</p>
                </div>
            </div>

            <div class="splash-actions">
                <button class="btn-back" onclick="showPreviousFeature()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                    </svg>
                </button>
                <div class="pagination-dots">
                    <span class="dot active"></span>
                    <span class="dot"></span>
                </div>
                <button class="btn-primary" onclick="app.showScreen('home')">
                    Los geht's
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M9 6L15 12L9 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <!-- Home Screen -->
    <div id="home-screen" class="screen">
        <div class="header">
            <div class="user-profile">
                <div class="avatar">üë§</div>
                <div class="user-info">
                    <h2 id="username">MasterPat</h2>
                    <p class="user-role">Student</p>
                </div>
            </div>
            <div class="user-score">
                <span class="trophy-badge">üèÜ</span>
                <span id="total-score">0</span>
            </div>
        </div>

        <div class="promo-card">
            <div class="promo-content">
                <h2>Werde zum Rechts-Champion</h2>
                <p>R√§nge erklimmen, Wissen sch√§rfen, zum Champion werden.</p>
            </div>
            <div class="promo-trophy">üèÜ</div>
        </div>

        <div class="upgrade-card" onclick="app.showScreen('admin')">
            <span class="upgrade-icon">üëë</span>
            <div class="upgrade-text">
                <h4>Fragen generieren</h4>
                <p>Erweitere den Fragen-Pool mit KI</p>
            </div>
            <button class="btn-icon">‚Üí</button>
        </div>

        <div class="section-header">
            <h3>Schwierigkeitsgrad w√§hlen</h3>
            <button class="btn-text" onclick="app.showScreen('leaderboard')">Alle anzeigen</button>
        </div>

        <div class="game-modes">
            <div class="game-card easy" onclick="app.startGame('easy')">
                <div class="game-badge">
                    <span class="badge-icon">üìù</span>
                </div>
                <div class="game-info">
                    <h3>Leicht</h3>
                    <p>Multiple Choice, kein Zeitlimit</p>
                    <div class="game-stats">
                        <span class="stat">‚≠ê 10 Punkte</span>
                    </div>
                </div>
                <button class="btn-play">‚ñ∂</button>
            </div>

            <div class="game-card medium" onclick="app.startGame('medium')">
                <div class="game-badge">
                    <span class="badge-icon">‚ö°</span>
                </div>
                <div class="game-info">
                    <h3>Mittel</h3>
                    <p>Multiple Choice, 5-Sekunden-Timer</p>
                    <div class="game-stats">
                        <span class="stat">‚≠ê 20-70 Punkte</span>
                        <span class="stat">‚è±Ô∏è Zeitbonus</span>
                    </div>
                </div>
                <button class="btn-play">‚ñ∂</button>
            </div>

            <div class="game-card hard" onclick="app.startGame('hard')">
                <div class="game-badge">
                    <span class="badge-icon">üî•</span>
                </div>
                <div class="game-info">
                    <h3>Schwer</h3>
                    <p>Open-Text-Input, manuelle Eingabe</p>
                    <div class="game-stats">
                        <span class="stat">‚≠ê 50 Punkte</span>
                        <span class="stat">üéØ Pr√§zision</span>
                    </div>
                </div>
                <button class="btn-play">‚ñ∂</button>
            </div>
        </div>

        <nav class="bottom-nav">
            <button class="nav-item active" onclick="app.showScreen('home')">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z" />
                </svg>
                <span>Start</span>
            </button>
            <button class="nav-item" onclick="app.showScreen('quiz')">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z" />
                </svg>
                <span>Quiz</span>
            </button>
            <button class="nav-item" onclick="app.showScreen('leaderboard')">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M16 11V3H8v6H2v12h20V11h-6zm-6-6h4v14h-4V5zm-6 6h4v8H4v-8zm16 8h-4v-6h4v6z" />
                </svg>
                <span>Rangliste</span>
            </button>
            <button class="nav-item" onclick="app.showScreen('profile')">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" />
                </svg>
                <span>Profil</span>
            </button>
        </nav>
    </div>

    <!-- Quiz Screen -->
    <div id="quiz-screen" class="screen">
        <div class="quiz-header">
            <button class="btn-icon-round" onclick="app.showScreen('home')">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                </svg>
            </button>
            <div class="quiz-progress">
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>
                <span class="progress-text" id="progress-text">Frage 1/10</span>
            </div>
            <button class="btn-icon-round" onclick="app.toggleDarkMode()">
                <span id="theme-icon">üåô</span>
            </button>
        </div>

        <div class="strikes-display">
            <div class="strike-item" id="strike-1">‚ù§Ô∏è</div>
            <div class="strike-item" id="strike-2">‚ù§Ô∏è</div>
            <div class="strike-item" id="strike-3">‚ù§Ô∏è</div>
        </div>

        <div class="score-display">
            <span class="score-label">Score:</span>
            <span class="score-value" id="current-score">0</span>
        </div>

        <div class="timer-container" id="timer-container" style="display: none;">
            <div class="timer-circle">
                <svg class="timer-svg" viewBox="0 0 100 100">
                    <circle class="timer-bg" cx="50" cy="50" r="45" />
                    <circle class="timer-progress" id="timer-progress" cx="50" cy="50" r="45" />
                </svg>
                <span class="timer-text" id="timer-text">5</span>
            </div>
        </div>

        <div class="question-card">
            <div class="question-category" id="question-category">BGB</div>
            <h2 class="question-text" id="question-text">Frage wird geladen...</h2>
            <!-- Hidden: Don't show correct answer before user answers -->
            <div class="question-paragraph" id="question-paragraph" style="display: none;">¬ß XXX</div>
        </div>

        <div class="answers-container" id="answers-container">
            <!-- Multiple Choice Answers (easy/medium) -->
            <div id="mc-answers" class="mc-answers">
                <!-- Dynamically generated -->
            </div>

            <!-- Text Input (hard) -->
            <div id="text-answer" class="text-answer" style="display: none;">
                <input type="text" id="answer-input" placeholder="Gib den Paragraphen ein (z.B. ¬ß 312j Abs. 3 BGB)"
                    autocomplete="off">
                <button class="btn-submit" onclick="app.submitTextAnswer()">Antwort absenden</button>
            </div>
        </div>

        <div class="feedback-modal" id="feedback-modal">
            <div class="feedback-content">
                <div class="feedback-icon" id="feedback-icon">‚úÖ</div>
                <h3 class="feedback-title" id="feedback-title">Richtig!</h3>
                <p class="feedback-text" id="feedback-text"></p>
                <button class="btn-continue" onclick="app.nextQuestion()">Weiter</button>
            </div>
        </div>
    </div>

    <!-- Leaderboard Screen -->
    <div id="leaderboard-screen" class="screen">
        <div class="header-simple">
            <button class="btn-icon-round" onclick="app.showScreen('home')">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                </svg>
            </button>
            <h2>Leaderboard</h2>
            <div class="month-badge">November</div>
        </div>

        <div class="leaderboard-tabs">
            <button class="tab-btn active" onclick="app.filterLeaderboard('all')">Alle</button>
            <button class="tab-btn" onclick="app.filterLeaderboard('easy')">Leicht</button>
            <button class="tab-btn" onclick="app.filterLeaderboard('medium')">Mittel</button>
            <button class="tab-btn" onclick="app.filterLeaderboard('hard')">Schwer</button>
        </div>

        <div class="leaderboard-list" id="leaderboard-list">
            <!-- Dynamically generated -->
        </div>

        <nav class="bottom-nav">
            <button class="nav-item" onclick="app.showScreen('home')">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z" />
                </svg>
                <span>Start</span>
            </button>
            <button class="nav-item" onclick="app.showScreen('quiz')">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z" />
                </svg>
                <span>Quiz</span>
            </button>
            <button class="nav-item active" onclick="app.showScreen('leaderboard')">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M16 11V3H8v6H2v12h20V11h-6zm-6-6h4v14h-4V5zm-6 6h4v8H4v-8zm16 8h-4v-6h4v6z" />
                </svg>
                <span>Rangliste</span>
            </button>
            <button class="nav-item" onclick="app.showScreen('profile')">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" />
                </svg>
                <span>Profil</span>
            </button>
        </nav>
    </div>

    <!-- Profile Screen -->
    <div id="profile-screen" class="screen">
        <div class="header-simple">
            <button class="btn-icon-round" onclick="app.showScreen('home')">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                </svg>
            </button>
            <h2>Profil</h2>
            <button class="btn-icon-round" onclick="app.editProfile()">‚úèÔ∏è</button>
        </div>

        <div class="profile-card">
            <div class="profile-avatar">üë§</div>
            <h2 id="profile-username">MasterPat</h2>
            <p class="profile-email">student@quiz.de</p>
            <div class="profile-stats">
                <div class="stat-item">
                    <span class="stat-value" id="total-games">0</span>
                    <span class="stat-label">Spiele</span>
                </div>
                <div class="stat-item">
                    <span class="stat-value" id="total-questions">0</span>
                    <span class="stat-label">Fragen</span>
                </div>
                <div class="stat-item">
                    <span class="stat-value" id="accuracy">0%</span>
                    <span class="stat-label">Genauigkeit</span>
                </div>
            </div>
        </div>

        <div class="settings-section">
            <h3>Einstellungen</h3>
            <div class="setting-item">
                <div class="setting-info">
                    <span class="setting-icon">üåô</span>
                    <span class="setting-label">Dark Mode</span>
                </div>
                <label class="toggle-switch">
                    <input type="checkbox" id="dark-mode-toggle" onchange="app.toggleDarkMode()">
                    <span class="toggle-slider"></span>
                </label>
            </div>
            <div class="setting-item">
                <div class="setting-info">
                    <span class="setting-icon">üì≥</span>
                    <span class="setting-label">Haptisches Feedback</span>
                </div>
                <label class="toggle-switch">
                    <input type="checkbox" id="haptic-toggle" checked onchange="app.toggleHaptic()">
                    <span class="toggle-slider"></span>
                </label>
            </div>
        </div>

        <nav class="bottom-nav">
            <button class="nav-item" onclick="app.showScreen('home')">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z" />
                </svg>
                <span>Start</span>
            </button>
            <button class="nav-item" onclick="app.showScreen('quiz')">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z" />
                </svg>
                <span>Quiz</span>
            </button>
            <button class="nav-item" onclick="app.showScreen('leaderboard')">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M16 11V3H8v6H2v12h20V11h-6zm-6-6h4v14h-4V5zm-6 6h4v8H4v-8zm16 8h-4v-6h4v6z" />
                </svg>
                <span>Rangliste</span>
            </button>
            <button class="nav-item active" onclick="app.showScreen('profile')">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" />
                </svg>
                <span>Profil</span>
            </button>
        </nav>
    </div>

    <!-- Admin Screen (Question Generator) -->
    <div id="admin-screen" class="screen">
        <div class="header-simple">
            <button class="btn-icon-round" onclick="app.showScreen('home')">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                </svg>
            </button>
            <h2>Fragen-Generator</h2>
            <span class="ai-badge">‚ú® KI</span>
        </div>

        <div class="generator-card">
            <div class="generator-icon">ü§ñ</div>
            <h3>KI-gest√ºtzte Fragengenerierung</h3>
            <p>Erweitere den Fragen-Pool automatisch mit Gemini AI</p>
        </div>

        <div class="generator-options">
            <div class="option-group">
                <label>Schwierigkeitsgrad</label>
                <select id="gen-difficulty" class="select-input">
                    <option value="easy">Leicht</option>
                    <option value="medium">Mittel</option>
                    <option value="hard">Schwer</option>
                    <option value="all">Alle</option>
                </select>
            </div>

            <div class="option-group">
                <label>Anzahl Fragen</label>
                <select id="gen-count" class="select-input">
                    <option value="5">5 Fragen</option>
                    <option value="10" selected>10 Fragen</option>
                    <option value="15">15 Fragen</option>
                    <option value="20">20 Fragen</option>
                </select>
            </div>

            <div class="option-group">
                <label>Kategorie (optional)</label>
                <select id="gen-category" class="select-input">
                    <option value="">Alle Kategorien</option>
                    <option value="BGB">BGB</option>
                    <option value="EGBGB">EGBGB</option>
                    <option value="UWG">UWG</option>
                    <option value="PAngV">PAngV</option>
                    <option value="DSGVO">DSGVO</option>
                    <option value="Sonstige">Sonstige</option>
                </select>
            </div>
        </div>

        <button class="btn-generate" onclick="app.generateQuestions()">
            <span class="btn-icon">‚ú®</span>
            Fragen generieren
        </button>

        <div class="generator-status" id="generator-status" style="display: none;">
            <div class="status-spinner"></div>
            <p id="status-text">Generiere Fragen...</p>
        </div>

        <div class="generated-questions" id="generated-questions">
            <!-- Dynamically generated -->
        </div>
    </div>

    <!-- Game Over Modal -->
    <div class="modal" id="game-over-modal">
        <div class="modal-content game-over-content">
            <div class="game-over-icon" id="game-over-icon">üíî</div>
            <h2 id="game-over-title">Game Over!</h2>
            <p id="game-over-message">3 Fehler - Versuch es nochmal!</p>

            <div class="game-summary">
                <div class="summary-stat">
                    <span class="summary-label">Erreichte Punkte</span>
                    <span class="summary-value" id="final-score">0</span>
                </div>
                <div class="summary-stat">
                    <span class="summary-label">Richtige Antworten</span>
                    <span class="summary-value" id="correct-answers">0</span>
                </div>
                <div class="summary-stat">
                    <span class="summary-label">Genauigkeit</span>
                    <span class="summary-value" id="final-accuracy">0%</span>
                </div>
            </div>

            <div class="modal-actions">
                <button class="btn-secondary" onclick="app.showScreen('home')">Hauptmen√º</button>
                <button class="btn-primary" onclick="app.restartGame()">Nochmal spielen</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
    <script src="parallax.js"></script>
</body>

</html>